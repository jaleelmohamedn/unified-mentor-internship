<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Surgical Information</title><link rel="stylesheet" href="css/styles.css"></head>
<body>
<header><h1>Surgical Information</h1><div class="nav" style="padding:8px 12px;"><a class="link" href="dashboard.html">Dashboard</a><button id="logoutBtn">Logout</button></div></header>
<main class="card">
  <div class="grid grid-3">
    <input type="date" id="fromDate"><input type="date" id="toDate"><button id="loadRange">Load Range</button>
  </div>
  <table class="table" id="infoTable">
    <thead><tr><th>Date</th><th>OT</th><th>Surgeon</th><th>Patient</th><th>Status</th><th>Report</th></tr></thead><tbody></tbody>
  </table>
</main>
<script src="js/firebase-config.js"></script>
<script src="js/logger.js"></script>
<script src="js/otManager.js"></script>
<script>
document.getElementById('loadRange').addEventListener('click', async () => {
  const from = document.getElementById('fromDate').value;
  const to = document.getElementById('toDate').value;
  const rows = await window.OT.fetchRange(from, to);
  const tbody = document.querySelector('#infoTable tbody');
  tbody.innerHTML = '';
  for (const s of rows){
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${s.surgeryDate}</td><td>${s.otId}</td><td>${s.surgeon}</td><td>${s.patientId||''}</td><td>${s.status}</td><td>${s.surgeryReportURL?'<a class=link target=_blank href='+s.surgeryReportURL+'>View</a>':''}</td>`;
    tbody.appendChild(tr);
  }
});
</script>
<script src="js/auth.js"></script>
</body></html>